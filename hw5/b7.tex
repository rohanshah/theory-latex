\documentclass[12pt]{article}
\usepackage{fullpage}
\usepackage{titlesec}
\usepackage{tikz}
\usepackage{amsfonts,amssymb}
\usepackage{amsmath}
\usepackage{comment}
\usetikzlibrary{automata, positioning}

\input ../libraries/mac.tex
\input ../libraries/mathmac.tex

\begin{document}
\pagestyle{plain}
\titleformat{\subsection}[runin]
  {\normalfont\large\bfseries}{\thesubsection}{1em}{}

\title{Homework 5}
\author{Brooke Fugate, Michael O'Connor, Rohan Shah}
\date{}

\maketitle

\section*{Problem B7}

\subsection*{(i)} From the defintion of $\tau_1$ we have that:
$$\tau_1(b)= v_1bv_2 \text{ such that } v_1,v_2 \in (\bar\Omega \cup \{E\}^*)
\text{ for all } b\in \Delta$$
So we can extend $\tau_1$ for languages $L \subseteq \Delta^*$ such that
$\epsilon \not\in L$ to:
$$\tau_1(L) = \{v_1b_1v_2\cdots v_nb_nv_{n+1} \mid
v_j \in (\bar\Omega \cup \{E\}^*),\ b_1\cdots b_n \in L\}$$
And from the definition of $R$ we have that
$$ R = \{u_1\bar a_1h(a_1)\cdots u_n\bar a_nh(a_n)
\mid a\in \Omega,\ u_i\in \{E\}^*\}$$
So we can define $L_2 = \tau_1(L) \cap R$ as
$$L_2 = \{u_1\bar a_1h(a_1)\cdots u_n\bar a_nh(a_n)
\mid u_i \in \{E\}^*.\ h(a_1)\cdots h(a_n) \in L,\ a_i\in \Omega\}$$
Finally we can see that $L_2 \cap (\bar\Omega\cup\{h(a) \mid a\in \Omega\})^*$
contains any word from $L_2$ without any instances of $E$ i.e. that all
$u_i = \epsilon$ so we have
$$L_2\cap \left(\ptb{\Omega}\cup \{h(a) \mid a\in\Omega\}\right)^*
=\{\ptb{a_1}h(a_1) \ptb{a_2}h(a_2)\cdots \ptb{a_n}h(a_n)\ |\ 
h(a_1a_2\cdots a_n)\in L,\ a_i\in \Omega\}$$


\subsection*{(ii)}

Let $\mapdef{g}{\left(\Delta\cup\ptb{\Omega}\cup\{E\}\right)^*}
{\left(\Sigma\cup \{E\}\right)^*}$
be the homomorphism defined such that
\begin{align*}
g(a) &= \epsilon\quad \hbox{if $a\in\Delta$},\\
g(\ptb{a}) &= a\quad \hbox{if $a\in\Omega$},\\
g(E) &= E,
\end{align*}
let 
\[L_3 = g(L_2),\]
and
and let $\tau_2$ be the substitution on $\Sigma\cup\{E\}$
defined such that
\begin{align*}
\tau_2(a) &= \{a\}\quad \hbox{if $a\in\Sigma$},\\
\tau_2(E) &= \Gamma^+.
\end{align*}
Remember $L_2 = \tau_1(L) \cap R = \{u_1\bar a_1h(a_1)u_2\bar a_2 h(a_2)...u_n \bar a_n h(a_n) u_{n+1}$ So, $h(a_1)...h(a_n) \in L$ and $h(a_1...a_n) \in L$ with $u_i \in E^*$ and $a_i \in \Omega$. 

So, $L_3 = g(L_2)=\{u_1a_1u_2a_2...u_na_nu_{n+1} | h(a_1...a_n) \in L$ and $a_i \in \Omega$ and $u_i \in \{E\}^* \}$ \newline

With the substitution, we have $\tau_2(L_3)= \{v_1a_1v_2a_2...v_na_nv_{n+1} | v_i \in \Gamma^*$ and $h(a_1...a_n) \in L$ and $a_i \in \Omega \}$. From this we can see that the possible strings, when $h$ is applied will be an element of $h^{-1}(L)$. Then we can show that $b_1...b_m=h(a_1)...h(a_n)$. Finally, we conclude that $\tau_2(L_3)= \{v_1a_1v_2a_2...v_na_nv_{n+1} | v_i \in \Gamma^*$ and $h(a_1...a_n) \in L$ and $a_i \in \Omega \} = h^{-1}(L)$ when $\epsilon \not \in L$. And $\tau_2(g(\tau_1(L) \cap R)) = h^{-1}(L)$ when $\epsilon \not \in L$. In the other case, when $\epsilon \in L$, $\tau_2(g(\tau_1(L-\{\epsilon\}) \cap R) \cup \Gamma^* = h^{-1}(L)$ because we need to put back $\Gamma^*$ for the erasables that are from $g(a) = \epsilon$ if $a\in\Delta$. 

\medskip

Conclude that $\s{L}$ is closed under inverse homomorphisms by seeing that $\tau_1(b)$ is a regular expression, as is all of our other expressions. We have closure under homomorphisms, because we have closure under regular substitutions, and a homomorphism is a special kind of a regular substitution. It is also closed under the compliment of regular languages and the union of regular languages. So we obtain closure under inverse homomorphisms. 

\subsection*{(iii)}

Prove that if $L$ is context-free,
then so is 
$$h^{-1}(L) = \{w\in \Sigma^* \mid  h(w) \in L\}.$$
if $L$ is context-free then $\s{L} \cup L$ is context-free from above, and since $L \in \s{L}$ then $L \cup \s{L} = L \rightarrow L \subseteq \s{L}$.  And since $\s{L}$ is closed under inverse homomorphisms then $L$ is closed under homomorphism.


\end{document}
